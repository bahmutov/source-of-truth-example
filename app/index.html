<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Order Receipt</title>
    <meta
      name="description"
      content="Purchase receipt with order details, itemized list, taxes, fees, and totals."
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <div class="brand" aria-label="Brand">
        <svg
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          aria-hidden="true"
        >
          <path d="M12 2 2 7l10 5 10-5-10-5Z" />
          <path d="m2 17 10 5 10-5" />
          <path d="m2 12 10 5 10-5" />
        </svg>
        ShopCo
      </div>
      <div class="order-meta">
        <div>
          <strong>Order #:</strong>
          <span id="order-id">A1B2C3D4</span>
        </div>
        <div>
          <strong>Date:</strong>
          <time id="order-date" datetime="2025-10-03"
            >Oct 3, 2025</time
          >
        </div>
        <div
          class="status"
          title="Payment captured and preparing for shipment"
        >
          ● Paid
        </div>
      </div>
    </header>

    <main class="container" aria-labelledby="receipt-title">
      <div class="receipt-header">
        <div
          class="section-block"
          role="group"
          aria-label="Billing Address"
        >
          <h2 id="receipt-title">Receipt</h2>
          <div class="address" id="billing-address">
            <strong>Billing To</strong><br />
            Jane Doe<br />
            123 Market Street<br />
            Springfield, CA 94105<br />
            United States
          </div>
        </div>
        <div
          class="section-block"
          role="group"
          aria-label="Shipping Address"
        >
          <h2>Shipping</h2>
          <div class="address" id="shipping-address">
            <strong>Ship To</strong><br />
            Jane Doe<br />
            123 Market Street<br />
            Springfield, CA 94105<br />
            United States
          </div>
        </div>
        <div
          class="section-block"
          role="group"
          aria-label="Payment Method"
        >
          <h2>Payment</h2>
          <div class="payment">
            <strong>Visa •••• 4242</strong><br />
            Paid:
            <time datetime="2025-10-03T10:15:00-07:00"
              >Oct 3, 2025 10:15 AM PDT</time
            ><br />
            Transaction: <code class="code-chip">TXN-89XZ71</code>
          </div>
        </div>
        <div class="section-block" role="group" aria-label="Summary">
          <h2>Summary</h2>
          <div class="summary">
            3 items<br />
            Standard delivery (3–5 business days)
          </div>
        </div>
      </div>

      <div class="items-wrapper">
        <table class="items" aria-describedby="items-caption">
          <caption id="items-caption">
            Itemized purchase list
          </caption>
          <thead>
            <tr>
              <th scope="col">Item</th>
              <th scope="col">Qty</th>
              <th scope="col">Unit Price</th>
              <th scope="col">Line Total</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <span class="item-title"
                  >Wireless Noise-Cancelling Headphones</span
                >
                <span class="badge">Electronics</span>
                <span class="item-sku" aria-label="SKU"
                  >SKU: HEAD-WL-NC-01</span
                >
              </td>
              <td class="qty" data-label="Qty">1</td>
              <td class="price" data-label="Unit Price">$199.99</td>
              <td class="line-total" data-label="Line Total">
                $199.99
              </td>
            </tr>
            <tr>
              <td>
                <span class="item-title">USB-C Fast Charger 65W</span>
                <span class="badge badge-accessory">Accessory</span>
                <span class="item-sku" aria-label="SKU"
                  >SKU: CHRG-65W-USB-C</span
                >
              </td>
              <td class="qty">2</td>
              <td class="price">$29.50</td>
              <td class="line-total">$59.00</td>
            </tr>
            <tr>
              <td>
                <span class="item-title">Protective Travel Case</span>
                <span class="badge badge-bundle">Bundle</span>
                <span class="item-sku" aria-label="SKU"
                  >SKU: CASE-TRAVEL-01</span
                >
              </td>
              <td class="qty">1</td>
              <td class="price">$24.00</td>
              <td class="line-total">$24.00</td>
            </tr>
          </tbody>
        </table>

        <div class="totals-panel" aria-label="Cost Breakdown">
          <div class="totals-row">
            <span>Subtotal</span><span>$282.99</span>
          </div>
          <div class="totals-row">
            <span>Discount (WELCOME10)</span><span>- $10.00</span>
          </div>
          <div class="totals-row">
            <span>Delivery Fee</span><span>$7.95</span>
          </div>
          <div class="totals-row">
            <span>Estimated Tax (8.75%)</span><span>$24.03</span>
          </div>
          <div class="totals-row grand">
            <span>Total Paid</span
            ><span id="grand-total">$304.97</span>
          </div>
        </div>

        <div class="print-action">
          <button
            class="print-btn"
            type="button"
            onclick="window.print()"
            aria-label="Print receipt"
          >
            <svg
              viewBox="0 0 24 24"
              width="16"
              height="16"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              aria-hidden="true"
            >
              <path d="M6 9V2h12v7" />
              <path
                d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"
              />
              <path d="M6 14h12v8H6z" />
            </svg>
            Print Receipt
          </button>
          <button
            class="btn-secondary summary-btn"
            type="button"
            aria-haspopup="dialog"
            aria-expanded="false"
          >
            View Summary
          </button>
        </div>
      </div>
    </main>

    <!-- Summary Dialog (native element) -->
    <dialog
      id="summary-dialog"
      class="dialog"
      aria-labelledby="summary-dialog-title"
    >
      <form method="dialog">
        <header class="dialog-header">
          <h2 id="summary-dialog-title">Order Summary</h2>
          <button
            class="dialog-close"
            value="cancel"
            aria-label="Close summary"
          >
            &times;
          </button>
        </header>
        <div class="dialog-body">
          <p class="dialog-total-label">Total Paid</p>
          <p class="dialog-total-value">
            $ <span id="dialog-total-value">304.97</span>
          </p>
        </div>
        <footer class="dialog-footer">
          <button class="btn-secondary" value="cancel" type="submit">
            Close
          </button>
        </footer>
      </form>
    </dialog>

    <footer>
      This receipt is for your records. If you have any questions,
      contact support at
      <a href="mailto:support@example.com">support@example.com</a>.
    </footer>
    <script>
      // Example: dynamic date if not already set
      ;(function () {
        const dateEl = document.getElementById('order-date')
        if (dateEl && !dateEl.dataset.locked) {
          const now = new Date()
          const options = {
            year: 'numeric',
            month: 'short',
            day: 'numeric',
          }
          dateEl.textContent = now.toLocaleDateString(
            undefined,
            options,
          )
          dateEl.dateTime = now.toISOString().split('T')[0]
        }
        // Summary dialog behavior (native <dialog>)
        const summaryBtn = document.querySelector('.summary-btn')
        const nativeDialog = document.getElementById('summary-dialog')
        const totalSpan = document.getElementById('grand-total')
        const dialogTotalValue = document.getElementById(
          'dialog-total-value',
        )
        let lastFocusedElement = null
        function openDialog() {
          if (!nativeDialog) return
          lastFocusedElement = document.activeElement
          // dialogTotalValue.textContent =
          //   totalSpan?.textContent?.trim() || ''
          if (typeof nativeDialog.showModal === 'function') {
            nativeDialog.showModal()
          } else {
            nativeDialog.setAttribute('open', '')
          }
          summaryBtn.setAttribute('aria-expanded', 'true')
        }
        summaryBtn?.addEventListener('click', openDialog)
        nativeDialog?.addEventListener('close', () => {
          summaryBtn.setAttribute('aria-expanded', 'false')
          if (
            lastFocusedElement &&
            typeof lastFocusedElement.focus === 'function'
          ) {
            lastFocusedElement.focus()
          }
        })
      })()
    </script>
  </body>
</html>
